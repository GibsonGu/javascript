(function(e,w){function T(M,b){function g(a,s,D){D=H(D)?D:b.speed;s&&x&&(s=U(a),F?(a=j[s.centerItem].offCenter,h[B?"activate":"toCenter"](s.centerItem,1)):a>c.min&&a<c.max&&(a=j[s.firstItem].offStart));if(!C||!b.elasticBounds)a=Math.max(Math.min(a,c.max),c.min);a!==c.cur&&(c.cur=a,e.extend(d,U(c.cur)),V(),W(),m.trigger(n+":move",[c,k,d]),C||m.trigger(n+":nav",[c,k,d]),a=b.horizontal?{left:-c.cur+"px"}:{top:-c.cur+"px"},16<D?f.animate(a,D,C?"swing":b.easing,function(){C||m.trigger(n+":moveEnd",[c,
k,d])}):(f.css(a),C||m.trigger(n+":moveEnd",[c,k,d])))}function y(a){l&&(q.cur=Math.round((c.cur-c.min)/(c.max-c.min)*q.max),q.cur=Math.max(Math.min(q.cur,q.max),q.min),l.stop().animate(b.horizontal?{left:q.cur+"px"}:{top:q.cur+"px"},H(a)?a:b.speed,b.easing));Y()}function Y(){N.length&&N.removeClass(b.activeClass).eq(d.activePage).addClass(b.activeClass)}function W(){f.add(l).stop()}function A(a){return H(a)?0>a?0:a>j.length-1?j.length-1:a:a===w?-1:k.index(a)}function p(a,b){return parseInt(a.css(b),
10)}function U(a){for(var a=a||c.cur,b={},d=B?0:v/2,e=0;e<u.length;e++){if(a>=c.max||e===u.length-1){b.activePage=u.length-1;break}if(a<=u[e]+d){b.activePage=e;break}}if(x){for(var g=e=d=!1,f=0;f<j.length;f++){!1===d&&a<=j[f].offStart&&(d=f);!1===g&&a-j[f].size/2<=j[f].offCenter&&(g=f);if(f===j.length-1||!1===e&&a<j[f+1].offEnd)e=f;if(!1!==e)break}b.firstItem=H(d)?d:0;b.centerItem=H(g)?g:b.firstItem;b.lastItem=H(e)?e:b.centerItem}return b}function V(){if(x){var a=0===d.activeItem,s=d.activeItem>=
j.length-1;I.is("button,input")&&I.prop("disabled",a);J.is("button,input")&&J.prop("disabled",s);I[a?"removeClass":"addClass"](b.disabledClass);J[s?"removeClass":"addClass"](b.disabledClass)}N.length&&(a=c.cur<=c.min,s=c.cur>=c.max,O.is("button,input")&&O.prop("disabled",a),P.is("button,input")&&P.prop("disabled",s),O[a?"removeClass":"addClass"](b.disabledClass),P[s?"removeClass":"addClass"](b.disabledClass))}function t(a,b){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1;b&&
(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)}function H(a){return!isNaN(parseFloat(a))&&isFinite(a)}var h=this,m=e(M),f=m.children().eq(0),v=0,i=0,c={cur:0,max:0,min:0},K=e(b.scrollBar).eq(0),l=K.length?K.children().eq(0):0,Q=0,L=0,q={cur:0,max:0,min:0},X=e(b.pagesBar),N=0,u=[],Z="smart"===b.itemNav,B="forceCentered"===b.itemNav,F="centered"===b.itemNav||B,x="basic"===b.itemNav||Z||F||B,k=0,j=[],d={firstItem:0,lastItem:1,centerItem:1,activeItem:-1,activePage:0,items:0,pages:0},$=b.scrollSource?
e(b.scrollSource):m,T=b.dragSource?e(b.dragSource):m,I=e(b.prev),J=e(b.next),O=e(b.prevPage),P=e(b.nextPage),G=0,aa=0,C=0,fa=this.reload=function(){var a=0,s=e.extend({},c);clearTimeout(G);v=b.horizontal?m.width():m.height();Q=b.horizontal?K.width():K.height();i=b.horizontal?f.outerWidth():f.outerHeight();k=f.children();j=[];u=[];c.min=0;c.max=Math.max(i-v,0);d.items=k.length;if(x){var D=p(k,b.horizontal?"marginLeft":"marginTop"),E=p(k.slice(-1),b.horizontal?"marginRight":"marginBottom"),t=0,M=p(f,
b.horizontal?"paddingLeft":"paddingTop"),ca=p(f,b.horizontal?"paddingRight":"paddingBottom"),da="none"!==k.css("float"),a=D?0:E;i=0;k.each(function(a,c){var d=e(c),s=b.horizontal?d.outerWidth(!0):d.outerHeight(!0),f=p(d,"marginTop"),g=p(d,"marginBottom"),h=p(d,"marginLeft"),d=p(d,"marginRight"),h={size:s,offStart:i-(!a||b.horizontal?0:f),offCenter:i-Math.round(v/2-s/2),offEnd:i-v+s-(D?0:d),margins:{top:f,bottom:g,left:h,right:d}};a||(t=-(B?Math.round(v/2-s/2):0)+M,i+=M);i+=s;!b.horizontal&&!da&&g&&
(f&&0<a)&&(i-=Math.min(f,g));a===k.length-1&&(i+=ca);j.push(h)});f[0].style[b.horizontal?"width":"height"]=i+"px";i-=a;c.min=t;c.max=B?j[j.length-1].offCenter:Math.max(i-v,0);d.activeItem>=j.length&&h.activate(j.length-1)}e.extend(d,U(c.cur));l&&(L=b.dynamicHandle?Math.round(Q*v/i):b.horizontal?l.width():l.height(),L=Math.min(Math.max(b.minHandleSize,L),Q),q.max=Q-L,l[0].style[b.horizontal?"width":"height"]=L+"px");var z=0,E="",A=0;if(B)u=e.map(j,function(a){return a.offCenter});else for(;z-v<c.max;){var ba=
Math.min(c.max,z);u.push(ba);z+=v;if(z>c.max&&x&&c.max-ba<(j[j.length-1].size-a)/2){u[u.length-1]=c.max;break}}if(X.length){for(a=0;a<u.length;a++)E+=b.pageBuilder(A++);N=e(E).bind("click."+r,function(){h.activatePage(N.index(this))}).appendTo(X.empty())}k.unbind("."+r).bind("mouseup."+r,function(a){1===a.which&&!C&&h.activate(this)});c.cur<c.min&&g(c.min);c.cur>c.max&&g(c.max);d.pages=u.length;d.slideeSize=i;d.frameSize=v;d.sbSize=Q;d.handleSize=L;y(0);V();b.cycleBy&&(E="mouseenter."+r+" mouseleave."+
r,b.pauseOnHover&&m.unbind(E).bind(E,function(a){if(!aa)h["mouseenter"===a.type?"pause":"cycle"](1)}),b.startPaused||h.cycle());m.trigger(n+":load",[e.extend({},c,{old:s}),k,d])};this.prev=function(){h.activate(d.activeItem-1)};this.next=function(){h.activate(d.activeItem+1)};this.prevPage=function(){h.activatePage(d.activePage-1)};this.nextPage=function(){h.activatePage(d.activePage+1)};this.toStart=function(a){if(x){var d=A(a);if(a===w)g(c.min,1);else if(-1!==d){if(F)return;-1!==d&&g(j[d].offStart)}}else a===
w?g(c.min):(a=f.find(a).eq(0),a.length&&(a=b.horizontal?a.offset().left-f.offset().left:a.offset().top-f.offset().top,g(a)));y()};this.toEnd=function(a){if(x){var d=A(a);if(a===w)g(c.max,1);else if(-1!==d){if(F)return;g(j[d].offEnd)}}else a===w?g(c.max):(a=f.find(a).eq(0),a.length&&(d=b.horizontal?a.offset().left-f.offset().left:a.offset().top-f.offset().top,g(d-v+a[b.horizontal?"outerWidth":"outerHeight"]())));y()};this.toCenter=function(a){if(x){var d=A(a);a===w?g(Math.round(c.max/2+c.min/2),1):
-1!==d&&(g(j[d].offCenter),B&&h.activate(d,1))}else a===w?g(Math.round(c.max/2)):(a=f.find(a).eq(0),a.length&&(d=b.horizontal?a.offset().left-f.offset().left:a.offset().top-f.offset().top,g(d-v/2+a[b.horizontal?"outerWidth":"outerHeight"]()/2)));y()};this.activate=function(a,c){if(x&&a!==w){var e=A(a),f=d.activeItem;d.activeItem=e;k.removeClass(b.activeClass).eq(e).addClass(b.activeClass);e!==f&&k.eq(e).trigger(n+":active",[k,d]);c||(F?h.toCenter(e):Z&&(e>=d.lastItem?h.toStart(e):e<=d.firstItem&&
h.toEnd(e)));V()}};this.activatePage=function(a){a=Math.max(Math.min(a,u.length-1),0);g(u[a],x);y()};this.cycle=function(){if(!G&&b.cycleBy&&("items"!==b.cycleBy||j.length))m.trigger(n+":cycleStart",[c,k,d]),function s(){b.cycleInterval&&(G=setTimeout(function(){if(!C)switch(b.cycleBy){case "items":h.activate(d.activeItem>=j.length-1?0:d.activeItem+1);break;case "pages":h.activatePage(d.activePage>=u.length-1?0:d.activePage+1)}m.trigger(n+":cycle",[c,k,d]);s()},b.cycleInterval))}()};this.pause=function(a){G&&
(a||(aa=!0),G=clearTimeout(G),m.trigger(n+":cyclePause",[c,k,d]))};this.toggle=function(){h[G?"pause":"cycle"]()};this.set=function(a,c){e.isPlainObject(a)?e.extend(b,a):b.hasOwnProperty(a)&&(b[a]=c)};this.destroy=function(){m.add(document).add(f).add(k).add($).add(l).add(I).add(J).add(O).add(P).unbind("."+r);f.add(l).css(b.horizontal?"left":"top",0);I.add(J).removeClass(b.disabledClass);X.empty();e.removeData(M,r)};var R=e(document),S="mousemove."+r+" mouseup."+r,b=e.extend({},e.fn[n].defaults,b);
m.css("overflow","hidden");"static"===m.css("position")&&m.css("position","relative");"static"===K.css("position")&&K.css("position","relative");f.add(l).css(e.extend({position:"absolute"},b.horizontal?{left:0}:{top:0}));fa();x?h.activate(b.startAt):g(b.startAt);y();b.scrollBy&&$.bind("DOMMouseScroll."+r+" mousewheel."+r,function(a){if(c.min!==c.max){t(a,1);var a=a.originalEvent,e=0;a.wheelDelta&&(e=a.wheelDelta/120);a.detail&&(e=-a.detail/3);a=0>e;x?(a=A((F?B?d.activeItem:d.centerItem:d.firstItem)+
(a?b.scrollBy:-b.scrollBy)),h[F?B?"activate":"toCenter":"toStart"](a)):g(c.cur+(a?b.scrollBy:-b.scrollBy));y()}});b.keyboardNav&&R.bind("keydown."+r,function(a){switch(a.which){case b.horizontal?37:38:t(a);h[b.keyboardNavByPages?"prevPage":"prev"]();break;case b.horizontal?39:40:t(a),h[b.keyboardNavByPages?"nextPage":"next"]()}});b.prev&&I.bind("click."+r,function(a){t(a);h.prev()});b.next&&J.bind("click."+r,function(a){t(a);h.next()});b.prevPage&&O.bind("click."+r,function(a){t(a);h.prevPage()});
b.nextPage&&P.bind("click."+r,function(a){t(a);h.nextPage()});b.dragContent&&T.bind("mousedown."+r,function(a){if(1===a.which){t(a);var d=a.clientX,h=a.clientY,j=c.cur,q=+new Date,k=a.target,i=0;f.addClass(b.draggedClass);W();R.bind(S,function(a){var z="mouseup"===a.type,m=b.horizontal?a.clientX-d:a.clientY-h,l=j-m;!i&&10<Math.abs(m)&&(i=1,console.log("asdsa",m),f.trigger(n+":dragStart",[c]));l>c.max?l=b.elasticBounds?c.max+(l-c.max)/6:c.max:l<c.min&&(l=b.elasticBounds?c.min+(l-c.min)/6:c.min);if(z&&
16<b.speed)var p=+new Date-q,p=300>p?Math.ceil(Math.pow(6/(p/300),2)*Math.abs(m)/120):0,l=l+(0<m?-p:p);i&&(t(a),k&&(e(k).bind("click."+r,function ea(a){t(a,1);e(this).unbind("click."+r,ea)}),k=0),C=!z,g(l,z,z?b.speed:0),y(z?null:0),i&&f.trigger(n+":drag",[c]),z&&(R.unbind(S),f.removeClass(b.draggedClass),f.trigger(n+":dragEnd",[c])))})}});l&&b.dragHandle&&l.bind("mousedown."+r,function(a){if(1===a.which){t(a);var d=a.clientX,e=a.clientY,f=q.cur,h=-q.cur,j=q.max-q.cur,k=0;l.addClass(b.draggedClass);
W();R.bind(S,function(a){t(a);var i="mouseup"===a.type,a=b.horizontal?a.clientX-d:a.clientY-e,m=f+a,p=+new Date;C=!i;i&&(R.unbind(S),l.removeClass(b.draggedClass));if(a<j+5&&a>h-5||i){q.cur=Math.max(Math.min(m,q.max),q.min);l.stop()[0].style[b.horizontal?"left":"top"]=q.cur+"px";k||l.trigger(n+":dragStart",[q]);l.trigger(n+":drag",[q]);i&&l.trigger(n+":dragEnd",[q]);if(k<=p||i||a>j||a<h)k=p+50,g(Math.round(q.cur/q.max*(c.max-c.min))+c.min,i,i?b.speed:50);Y()}})}})}var n="sly",r=n;e.fn[n]=function(n,
b){var g=!1,y,w;"undefined"!==typeof n&&!e.isPlainObject(n)&&(g=!1===n?"destroy":n,y=arguments,Array.prototype.shift.call(y));this.each(function(b,A){var p=e.data(A,r);p&&g?p[g]&&p[g].apply(p,y):!p&&!g&&(p=e.data(A,r,new T(A,n)));w||(w=p)});return b&&!g?w:this};e.fn[n].defaults={horizontal:0,itemNav:0,scrollBar:null,dynamicHandle:1,dragHandle:1,minHandleSize:50,pagesBar:null,pageBuilder:function(e){return"<li>"+(e+1)+"</li>"},prev:null,next:null,prevPage:null,nextPage:null,cycleBy:0,cycleInterval:5E3,
pauseOnHover:1,startPaused:0,scrollBy:0,dragContent:0,elasticBounds:0,speed:0,easing:"swing",scrollSource:null,dragSource:null,startAt:0,keyboardNav:0,keyboardNavByPages:0,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}})(jQuery);
